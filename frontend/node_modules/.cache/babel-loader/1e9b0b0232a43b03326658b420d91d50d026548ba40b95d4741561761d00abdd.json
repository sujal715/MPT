{"ast":null,"code":"import _objectSpread from\"/Users/sujaljoshi/Desktop/MpT/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// API Configuration for Render deployment\n// Updated with CORS fix - force redeployment\nconst API_BASE_URL=process.env.REACT_APP_API_URL||'https://mpt-sawp.onrender.com';// API Service Class\nclass ApiService{constructor(){this.baseURL=API_BASE_URL;this.token=localStorage.getItem('authToken');}// Set authentication token\nsetToken(token){this.token=token;localStorage.setItem('authToken',token);}// Remove authentication token\nremoveToken(){this.token=null;localStorage.removeItem('authToken');}// Get headers for requests\ngetHeaders(){const headers={'Content-Type':'application/json'};if(this.token){headers['Authorization']=\"Bearer \".concat(this.token);}return headers;}// Generic request method\nasync request(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};try{const url=\"\".concat(this.baseURL).concat(endpoint);const config=_objectSpread({headers:this.getHeaders()},options);const response=await fetch(url,config);// Handle different response statuses\nif(response.status===401){// Unauthorized - clear token and redirect to login\nthis.removeToken();window.location.href='/admin';throw new Error('Authentication required');}if(response.status===403){throw new Error('Access denied');}if(response.status===404){throw new Error('Resource not found');}if(response.status>=500){throw new Error('Server error');}// Parse response\nconst data=await response.json();if(!response.ok){throw new Error(data.message||'Request failed');}return data;}catch(error){console.error('API Request Error:',error);throw error;}}// GET request\nasync get(endpoint){return this.request(endpoint,{method:'GET'});}// POST request\nasync post(endpoint,data){return this.request(endpoint,{method:'POST',body:JSON.stringify(data)});}// PUT request\nasync put(endpoint,data){return this.request(endpoint,{method:'PUT',body:JSON.stringify(data)});}// DELETE request\nasync delete(endpoint){return this.request(endpoint,{method:'DELETE'});}// File upload\nasync uploadFile(endpoint,file){let additionalData=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const formData=new FormData();formData.append('file',file);// Add additional data\nObject.keys(additionalData).forEach(key=>{formData.append(key,additionalData[key]);});try{const url=\"\".concat(this.baseURL).concat(endpoint);const config={method:'POST',headers:{'Authorization':\"Bearer \".concat(this.token)},body:formData};const response=await fetch(url,config);const data=await response.json();if(!response.ok){throw new Error(data.message||'Upload failed');}return data;}catch(error){console.error('File Upload Error:',error);throw error;}}}// Create and export API service instance\nconst apiService=new ApiService();export default apiService;","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","ApiService","constructor","baseURL","token","localStorage","getItem","setToken","setItem","removeToken","removeItem","getHeaders","headers","concat","request","endpoint","options","arguments","length","undefined","url","config","_objectSpread","response","fetch","status","window","location","href","Error","data","json","ok","message","error","console","get","method","post","body","JSON","stringify","put","delete","uploadFile","file","additionalData","formData","FormData","append","Object","keys","forEach","key","apiService"],"sources":["/Users/sujaljoshi/Desktop/MpT/frontend/src/services/api.js"],"sourcesContent":["// API Configuration for Render deployment\n// Updated with CORS fix - force redeployment\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'https://mpt-sawp.onrender.com';\n\n// API Service Class\nclass ApiService {\n  constructor() {\n    this.baseURL = API_BASE_URL;\n    this.token = localStorage.getItem('authToken');\n  }\n\n  // Set authentication token\n  setToken(token) {\n    this.token = token;\n    localStorage.setItem('authToken', token);\n  }\n\n  // Remove authentication token\n  removeToken() {\n    this.token = null;\n    localStorage.removeItem('authToken');\n  }\n\n  // Get headers for requests\n  getHeaders() {\n    const headers = {\n      'Content-Type': 'application/json',\n    };\n    \n    if (this.token) {\n      headers['Authorization'] = `Bearer ${this.token}`;\n    }\n    \n    return headers;\n  }\n\n  // Generic request method\n  async request(endpoint, options = {}) {\n    try {\n      const url = `${this.baseURL}${endpoint}`;\n      const config = {\n        headers: this.getHeaders(),\n        ...options,\n      };\n\n      const response = await fetch(url, config);\n      \n      // Handle different response statuses\n      if (response.status === 401) {\n        // Unauthorized - clear token and redirect to login\n        this.removeToken();\n        window.location.href = '/admin';\n        throw new Error('Authentication required');\n      }\n      \n      if (response.status === 403) {\n        throw new Error('Access denied');\n      }\n      \n      if (response.status === 404) {\n        throw new Error('Resource not found');\n      }\n      \n      if (response.status >= 500) {\n        throw new Error('Server error');\n      }\n\n      // Parse response\n      const data = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(data.message || 'Request failed');\n      }\n\n      return data;\n    } catch (error) {\n      console.error('API Request Error:', error);\n      throw error;\n    }\n  }\n\n  // GET request\n  async get(endpoint) {\n    return this.request(endpoint, { method: 'GET' });\n  }\n\n  // POST request\n  async post(endpoint, data) {\n    return this.request(endpoint, {\n      method: 'POST',\n      body: JSON.stringify(data),\n    });\n  }\n\n  // PUT request\n  async put(endpoint, data) {\n    return this.request(endpoint, {\n      method: 'PUT',\n      body: JSON.stringify(data),\n    });\n  }\n\n  // DELETE request\n  async delete(endpoint) {\n    return this.request(endpoint, { method: 'DELETE' });\n  }\n\n  // File upload\n  async uploadFile(endpoint, file, additionalData = {}) {\n    const formData = new FormData();\n    formData.append('file', file);\n    \n    // Add additional data\n    Object.keys(additionalData).forEach(key => {\n      formData.append(key, additionalData[key]);\n    });\n\n    try {\n      const url = `${this.baseURL}${endpoint}`;\n      const config = {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${this.token}`,\n        },\n        body: formData,\n      };\n\n      const response = await fetch(url, config);\n      const data = await response.json();\n      \n      if (!response.ok) {\n        throw new Error(data.message || 'Upload failed');\n      }\n\n      return data;\n    } catch (error) {\n      console.error('File Upload Error:', error);\n      throw error;\n    }\n  }\n}\n\n// Create and export API service instance\nconst apiService = new ApiService();\nexport default apiService;\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}